(this.webpackJsonp2048=this.webpackJsonp2048||[]).push([[0],{10:function(e,t,n){},12:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),o=n(5),i=n.n(o),a=(n(10),n(11),n(12),n(3)),s=n(0),u=c.a.createContext();var l=function(e){var t=e.children,n=Object(r.useState)(0),c=Object(a.a)(n,2),o=c[0],i=c[1],l=Object(r.useState)(!1),d=Object(a.a)(l,2),f=d[0],j=d[1],b=[[4,4,4,4],[2048,512,1024,512],[256,1024,512,256],[2048,512,1024,512]],v=Object(r.useState)(b),h=Object(a.a)(v,2),m=h[0],O=h[1];return Object(r.useEffect)((function(){if(f){var e=parseInt(localStorage.getItem("2048maxScore"));e||localStorage.setItem("2048maxScore",o),e<o&&localStorage.setItem("2048maxScore",o),console.log(e)}}),[f]),Object(s.jsx)(u.Provider,{value:{gameField:m,setGameField:O,score:o,setScore:i,gameOver:f,setGameOver:j,initialField:b},children:t})},d=(n(2),function(){var e=Object(r.useContext)(u);function t(t){return e.gameField[t].map((function(e,n){return Object(s.jsx)("div",{className:"cell cellValue".concat(e),children:e},"row".concat(t,"_").concat(n))}))}return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"containerGame",children:Object(s.jsxs)("div",{className:"mt-5 gameGrid",children:[Object(s.jsx)("div",{children:t(0)}),Object(s.jsx)("div",{children:t(1)}),Object(s.jsx)("div",{children:t(2)}),Object(s.jsx)("div",{children:t(3)})]})})})}),f=function(){var e=Object(r.useContext)(u),t=localStorage.getItem("2048maxScore");return Object(r.useEffect)((function(){var t=parseInt(localStorage.getItem("2048maxScore"));t||localStorage.setItem("2048maxScore",e.score),t<e.score&&localStorage.setItem("2048maxScore",e.score)}),[e.score]),Object(s.jsxs)("div",{children:[Object(s.jsxs)("h2",{children:["current ",Object(s.jsx)("span",{className:"badge bg-light text-dark",children:e.score})]}),Object(s.jsxs)("h2",{children:["max ",Object(s.jsx)("span",{className:"badge bg-light text-dark",children:t})]})]})},j=function(){var e=Object(r.useContext)(u);return e.gameOver?Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Game Over"}),Object(s.jsx)("button",{className:"btn btn-outline-warning btn-lg m-2",onClick:function(){e.setGameField(e.initialField),e.setScore(0),e.setGameOver(!1),window.location.reload()},children:"reset!"})]}):null},b=function(){return Object(s.jsx)("div",{className:"github",children:Object(s.jsx)("a",{href:"https://github.com/kfivap/2048game",className:"btn btn-light m-2",children:"\u2605 Star me on GitHub! \u2605"})})};function v(e,t){return e===t&&0!==t}function h(e){for(var t=!1;!t;){var n=Math.floor(4*Math.random()),r=Math.floor(4*Math.random());if(0===e[n][r]){e[n][r]=2,t=!0;break}}return e}var m=[!0,!0,!0,!0],O=function(e){var t=Object(r.useContext)(u),n=null,c=null;function o(e){var t=function(e){return e.touches||e.originalEvent.touches}(e)[0];n=t.clientX,c=t.clientY}function i(e){if(n&&c){var t=e.touches[0].clientX,r=e.touches[0].clientY,o=n-t,i=c-r;Math.abs(o)>Math.abs(i)?o>0?window.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowLeft"})):window.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowRight"})):i>0?window.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowUp"})):window.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown"})),n=null,c=null}}var a=Object(r.useRef)();return Object(r.useEffect)((function(){setTimeout((function(){window.addEventListener("keydown",(function(e){!function(e){var n=t.gameField;if("ArrowUp"===e.key){for(var r=0,c=function(e){for(var c=0;c<2;c++)0===n[0][e]&&0!==n[1][e]&&(n[0][e]=n[1][e],n[1][e]=0,r+=1),0===n[1][e]&&0!==n[2][e]&&(n[1][e]=n[2][e],n[2][e]=0,r+=1),0===n[2][e]&&0!==n[3][e]&&(n[2][e]=n[3][e],n[3][e]=0,r+=1);v(n[0][e],n[1][e])&&(n[0][e]+=n[1][e],n[1][e]=0,r+=1,t.setScore((function(t){return t+n[0][e]}))),v(n[1][e],n[2][e])&&(n[1][e]+=n[2][e],n[2][e]=0,r+=1,t.setScore((function(t){return t+n[1][e]}))),v(n[2][e],n[3][e])&&(n[2][e]+=n[3][e],n[3][e]=0,r+=1,t.setScore((function(t){return t+n[2][e]})));for(var o=0;o<2;o++)0===n[0][e]&&0!==n[1][e]&&(n[0][e]=n[1][e],n[1][e]=0,r+=1),0===n[1][e]&&0!==n[2][e]&&(n[1][e]=n[2][e],n[2][e]=0,r+=1),0===n[2][e]&&0!==n[3][e]&&(n[2][e]=n[3][e],n[3][e]=0,r+=1)},o=0;o<4;o++)c(o);r>0&&(h(n),m.fill(!0)),0===r&&(m[0]=!1),r=0}if("ArrowDown"===e.key){for(var i=0,a=function(e){for(var r=0;r<2;r++)0===n[3][e]&&0!==n[2][e]&&(n[3][e]=n[2][e],n[2][e]=0,i+=1),0===n[2][e]&&0!==n[1][e]&&(n[2][e]=n[1][e],n[1][e]=0,i+=1),0===n[1][e]&&0!==n[0][e]&&(n[1][e]=n[0][e],n[0][e]=0,i+=1);v(n[3][e],n[2][e])&&(n[3][e]+=n[2][e],n[2][e]=0,i+=1,t.setScore((function(t){return t+n[3][e]}))),v(n[2][e],n[1][e])&&(n[2][e]+=n[1][e],n[1][e]=0,i+=1,t.setScore((function(t){return t+n[2][e]}))),v(n[1][e],n[0][e])&&(n[1][e]+=n[0][e],n[0][e]=0,i+=1,t.setScore((function(t){return t+n[1][e]})));for(var c=0;c<2;c++)0===n[3][e]&&0!==n[2][e]&&(n[3][e]=n[2][e],n[2][e]=0,i+=1),0===n[2][e]&&0!==n[1][e]&&(n[2][e]=n[1][e],n[1][e]=0,i+=1),0===n[1][e]&&0!==n[0][e]&&(n[1][e]=n[0][e],n[0][e]=0,i+=1)},s=0;s<4;s++)a(s);i>0&&(h(n),m.fill(!0)),0===i&&(m[1]=!1),i=0}if("ArrowLeft"===e.key){for(var u=0,l=function(e){for(var r=0;r<2;r++)0===n[e][0]&&0!==n[e][1]&&(n[e][0]=n[e][1],n[e][1]=0,u+=1),0===n[e][1]&&0!==n[e][2]&&(n[e][1]=n[e][2],n[e][2]=0,u+=1),0===n[e][2]&&0!==n[e][3]&&(n[e][2]=n[e][3],n[e][3]=0,u+=1);v(n[e][0],n[e][1])&&(n[e][0]+=n[e][1],n[e][1]=0,u+=1,t.setScore((function(t){return t+n[e][0]}))),v(n[e][1],n[e][2])&&(n[e][1]+=n[e][2],n[e][2]=0,u+=1,t.setScore((function(t){return t+n[e][1]}))),v(n[e][2],n[e][3])&&(n[e][2]+=n[e][3],n[e][3]=0,u+=1,t.setScore((function(t){return t+n[e][2]})));for(var c=0;c<2;c++)0===n[e][0]&&0!==n[e][1]&&(n[e][0]=n[e][1],n[e][1]=0,u+=1),0===n[e][1]&&0!==n[e][2]&&(n[e][1]=n[e][2],n[e][2]=0,u+=1),0===n[e][2]&&0!==n[e][3]&&(n[e][2]=n[e][3],n[e][3]=0,u+=1)},d=0;d<4;d++)l(d);u>0&&(h(n),m.fill(!0)),0===u&&(m[2]=!1),u=0}if("ArrowRight"===e.key){for(var f=0,j=function(e){for(var r=0;r<2;r++)0===n[e][3]&&0!==n[e][2]&&(n[e][3]=n[e][2],n[e][2]=0,f+=1),0===n[e][2]&&0!==n[e][1]&&(n[e][2]=n[e][1],n[e][1]=0,f+=1),0===n[e][1]&&0!==n[e][0]&&(n[e][1]=n[e][0],n[e][0]=0,f+=1);v(n[e][3],n[e][2])&&(n[e][3]+=n[e][2],n[e][2]=0,f+=1,t.setScore((function(t){return t+n[e][3]}))),v(n[e][2],n[e][1])&&(n[e][2]+=n[e][1],n[e][1]=0,f+=1,t.setScore((function(t){return t+n[e][2]}))),v(n[e][1],n[e][0])&&(n[e][1]+=n[e][0],n[e][0]=0,f+=1,t.setScore((function(t){return t+n[e][1]})));for(var c=0;c<2;c++)0===n[e][3]&&0!==n[e][2]&&(n[e][3]=n[e][2],n[e][2]=0,f+=1),0===n[e][2]&&0!==n[e][1]&&(n[e][2]=n[e][1],n[e][1]=0,f+=1),0===n[e][1]&&0!==n[e][0]&&(n[e][1]=n[e][0],n[e][0]=0,f+=1)},b=0;b<4;b++)j(b);f>0&&(h(n),m.fill(!0)),0===f&&(m[3]=!1),f=0}m.every((function(e){return!e}))&&(t.setGameOver(!0),m.fill(!0),t.setGameField(t.initialField)),t.setGameField(n)}(e)})),setTimeout((function(){a.current.addEventListener("touchstart",o,!1),a.current.addEventListener("touchmove",i,!1),a.current.focus()}),0)}),0)}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"game"}),Object(s.jsx)(f,{}),Object(s.jsx)("div",{ref:a,children:Object(s.jsx)(d,{})}),Object(s.jsx)(j,{}),Object(s.jsx)(b,{})]})};var x=function(){return Object(s.jsx)(l,{children:Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(O,{})})})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,15)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),o(e),i(e)}))};i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(x,{})}),document.getElementById("root")),g()},2:function(e,t,n){}},[[14,1,2]]]);
//# sourceMappingURL=main.2b8aa0b3.chunk.js.map